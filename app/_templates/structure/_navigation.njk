{% from "../components/_dropdown.njk" import dropdown %}
{% from "../components/_dialogs.njk" import dialog %}

{% set navigation = {
		"links": [
			{
				"title": "Inicio",
				"url": "/index.html",
				"icon": "/assets/images/ui/navigation/icono-home.svg"
			},
			{
				"title": "-",
				"class": "collapsed-item"
			},
			{
				"title": "Pagar",
				"url": "/pagar.html",
				"icon": "/assets/images/ui/navigation/icono-info.svg"
			},
			{
				"title": "Avisar que pagu√©",
				"icon": "/assets/images/ui/navigation/icono-avisar.svg",
				"url": "/avisar.html"
			},
			{
				"title": "Prometer una fecha",
				"icon": "/assets/images/ui/navigation/icono-prometer.svg",
				"url": "/prometer.html"
			},
			{
				"title": "Pagar en cuotas",
				"icon": "/assets/images/ui/navigation/icono-cuotas.svg",
				"url": "/cuotas.html"
			},
			{
				"title": "Promesas hechas",
				"icon": "/assets/images/ui/navigation/icono-hechas.svg",
				"url": "/hechas.html"
			},
			{
				"title": "Planes pedidos",
				"icon": "/assets/images/ui/navigation/icono-planes.svg",
				"url": "/planes.html"
			},
			{
				"title": "Tus comprobantes",
				"icon": "/assets/images/ui/navigation/icono-actividad.svg",
				"url": "/comprobantes.html"
			},
			{
				"title": "-",
				"class": "collapsed-item"
			},
			{
				"title": "Tu Perfil",
				"url": "/perfil.html",
				"icon": "/assets/images/ui/navigation/icono-perfil.svg"
			},
			{
				"title": "Preguntas frecuentes",
				"url": "/faqs.html",
				"icon": "/assets/images/ui/navigation/icono-faq.svg"
			},
			{
				"title": "Salir",
				"url": "#logout",
				"icon": "/assets/images/ui/navigation/icono-salir.svg"
			}
		]
	}
%}

{{ dialog({
		"id": "nav-overlay",
		"class": "",
		"content": ""
	}) }}

<nav class="main-navigation">
	<input type="checkbox" class="visually-hidden mobile-menu-toggle" id="mobile-menu-toggle">
	<label class="mobile-menu-toggle-label" for="mobile-menu-toggle">
		<img src="/assets/images/ui/menu.svg" alt="">
	</label>
	<div class="navigation-container">
		<ul>
			{% for item in navigation.links %}
			<li class="navigation-item {{ item.class }}" style="--icon: url('{{ item.icon }}');">
				{% if item.title == "-" %}
					<hr>
				{% else %}
					<a class="item {% if loop.first %}active{% endif %}" href="{{ item.url }}">{{ item.title }}</a>
				{% endif %}
			</li>
			{% endfor %}
		</ul>
	</div>
</nav>

<script>
	const mobileMenuBtn = document.querySelector('#mobile-menu-toggle')
	const navOverlay = document.querySelector('#nav-overlay')


	mobileMenuBtn.checked = false

	mobileMenuBtn.addEventListener('click', () => {
		console.log(mobileMenuBtn.getAttribute('checked'))

		if (mobileMenuBtn.getAttribute('checked')) {
			navOverlay.classList.remove('active')
		} else {
			navOverlay.classList.add('active')
		}
	})

	navOverlay.addEventListener('click', () => {
		//mobileMenuBtn.click()
		navOverlay.classList.remove('active')
		mobileMenuBtn.checked = false
	})

</script>