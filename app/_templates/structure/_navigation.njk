{% from "../components/_dropdown.njk" import dropdown %}
{% from "../components/_dialogs.njk" import dialog %}

{{ dialog({
		"id": "nav-overlay",
		"class": "",
		"content": ""
	}) }}

<nav class="main-navigation">
	<input type="checkbox" class="visually-hidden mobile-menu-toggle" id="mobile-menu-toggle">
	<label class="mobile-menu-toggle-label" for="mobile-menu-toggle">
		<img src="/assets/images/ui/menu.svg" alt="">
	</label>
	<div class="navigation-container">
		<div class="text-center">
			<img class="logo" src="{{ sidebar.logo.src }}" alt="{{ sidebar.logo.alt }}">
		</div>
		<ul>
			{% for item in sidebar.links %}
			<li class="navigation-item" style="--icon: url('{{ item.icon }}');">
				{% if item.title == "-" %}
					<hr>
				{% else %}
					{% if item.dropdown %}
						{% call dropdown({'title': item.title, 'class': 'item'}) %}
							<ul>
							{% for dropdown in item.dropdown %}
								<li class="item">
									<a href="{{ dropdown.url }}">{{ dropdown.title }}</a>
								</li>
							{% endfor %}
							</ul>
						{% endcall %}
					{% else %}
						<a class="item" href="{{ item.url }}">{{ item.title }}</a>
					{% endif %}
				{% endif %}
			</li>
			{% endfor %}
		</ul>
	</div>
</nav>

<script>
	const mobileMenuBtn = document.querySelector('#mobile-menu-toggle')
	const navOverlay = document.querySelector('#nav-overlay')


	mobileMenuBtn.checked = false

	mobileMenuBtn.addEventListener('click', () => {
		console.log(mobileMenuBtn.getAttribute('checked'))

		if (mobileMenuBtn.getAttribute('checked')) {
			navOverlay.classList.remove('active')
		} else {
			navOverlay.classList.add('active')
		}
	})

	navOverlay.addEventListener('click', () => {
		//mobileMenuBtn.click()
		navOverlay.classList.remove('active')
		mobileMenuBtn.checked = false
	})
</script>